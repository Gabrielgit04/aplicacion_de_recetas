<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../static/assets/css/styles.css">
    <link rel=" icon" href="{{ url_for('static', filename='assets/imgs/logo.jpg') }}" type="image/x-icon">
    <title>Registrate</title>
</head>

<body>
    <section class="container">

        <div class="semicirculo">
            <img src="{{ url_for('static', filename='assets/imgs/logo.jpg') }}" alt="logo_delicias_de_cocina">
            <h1>Delicias de cocina</h1>


        </div>
        <div class="login">


            <div class="register_box">
                <header>
                    <h2>Crea una cuenta</h2>
                </header>

                <form action="/api/crear_usuario_nuevo" method="post" autocomplete="off">
                    {% if error %}
                    <div style="background-color: #ffe5e5; color: #d8000c; border: 1px solid #d8000c; padding: 5px; margin-top: -27px; margin-bottom: -27px;; border-radius: 5px; text-align: center;">
                        {{ error }}
                    </div>
                    {% endif %}
                    <div class="input_form">
                        <input type="text" name="username" class="entry" placeholder="Usuario | Max 30 caracteres" title="Ingrese un nombre de usuario" minlength="3" maxlength="15" pattern="/^[a-zA-Z0-9_]{3,15}$/" required>
                        <div class="labelline"><span><img src="{{ url_for('static', filename='assets/imgs/icon/icon_user.png') }}" alt="icon"
                                    class="icon_user"></span></div>
                    </div>
                    

                        <div class="input_form">
                            <input type="email" name="adreess" class="entry" placeholder="Correo" title="Ingrese su correo, debe contener un @ obligatoriamente."pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$" required>
                            <div class="labelline"><span><img src="{{ url_for('static', filename='assets/imgs/icon/icon_user.png') }}" alt="icon"
                                        class="icon_user"></span></div>
                        </div>

                    <div class="input_form">
                        <input type="password" class="entry_pass" name="password"
                            placeholder="Contraseña | Max 15 caracteres" title="Ingrese minimo 8 caracteres y maximo 15" minlength="8" maxlength="15" pattern="/^(?=.*[a-z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,15}$/" required>
                        <div class="labelline_pass"><span><img src="{{ url_for('static', filename='assets/imgs/icon/icons8-lock-48.png') }}" alt="icon"
                                    class="icon_user"></span>
                        </div>
                    </div>


                    <div class="input_form">
                        <input type="password" class="entry_pass" name="rep-password"
                            placeholder="Repite tu contraseña | Max 15 caracteres" title="Ingrese minimo 8 caracteres y maximo 15"  minlength="8" maxlength="15" pattern="/^(?=.*[a-z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,15}$/" required>
                        <div class="labelline_pass"><span><img src="{{ url_for('static', filename='assets/imgs/icon/icons8-lock-48.png') }}" alt="icon"
                                    class="icon_user"></span>
                        </div>
                    </div>

                    <button>Registrarse</button>
                </form>
                <a href="{{ url_for('inicio_sesion') }}" class="link_login">¿Tienes cuenta? Inicia aquí</a>
                <p id="validate" style="font-size: 9px;font-family: Arial, Helvetica, sans-serif;color: #d8000c;"></p>


            </div>
            <a href="{{url_for('index')}}" class="home">Volver a inicio</a>

        </div>
    </section>
    <script>
        // Validación de formulario

        document.querySelector('form').addEventListener('submit', function(event) {
            const username = document.querySelector('input[name="username"]').value;
            const email = document.querySelector('input[name="adreess"]').value;
            const password = document.querySelector('input[name="password"]').value;
            const confirmPassword = document.querySelectorAll('input[name="rep-password"]')[1].value;

            let valid = true;

            // Validar nombre de usuario
            if (username.length < 3 || username.length > 15) {
                document.getElementById('validate').textContent = 'El nombre de usuario debe tener entre 3 y 15 caracteres.';
                valid = false;
            }

            // Validar correo electrónico
            else if (!email.includes('@')) {
                document.getElementById('validate').textContent = 'El correo electrónico debe contener un @.';
                valid = false;
            }

            // Validar contraseña
            else if (password.length < 8 || password.length > 15) {
                document.getElementById('validate').textContent = 'La contraseña debe tener entre 8 y 15 caracteres.';
                valid = false;
            }

            // Validar confirmación de contraseña
            else if (password !== confirmPassword) {
                document.getElementById('validate').textContent = 'Las contraseñas no coinciden.';
                valid = false;
            }

            if (!valid) {
                event.preventDefault(); // Evitar el envío del formulario si hay errores
            }
        });

    </script>

</body>

</html>